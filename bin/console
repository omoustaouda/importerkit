#!/usr/bin/env php
<?php

declare(strict_types=1);

/**
 * Data Feed Importer CLI Entry Point
 *
 * This is the main entry point for the CLI application.
 * Dependencies are wired via PHP-DI container.
 */

use DataFeedImporter\Command\ImportCommand;
use DI\ContainerBuilder;
use Symfony\Component\Console\Application;
use Symfony\Component\Dotenv\Dotenv;

require __DIR__ . '/../vendor/autoload.php';

// Load environment variables
$dotenv = new Dotenv();
if (file_exists(__DIR__ . '/../.env')) {
    $dotenv->load(__DIR__ . '/../.env');
}

// Build DI container
$containerBuilder = new ContainerBuilder();
$containerBuilder->addDefinitions(__DIR__ . '/../config/services.php');
$container = $containerBuilder->build();

// Create and run application
$application = new Application('Data Feed Importer', '1.0.0');

$application->addCommand($container->get(ImportCommand::class));

$application->run();

